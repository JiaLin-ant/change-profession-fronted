{"ast":null,"code":"var _jsxFileName = \"/Users/linjia/code/change-profession-fronted/src/contexts/JobContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { jobsData } from '../data/jobsData';\nimport { jobsDataEn } from '../data/jobsDataEn';\nimport { useLanguage } from './LanguageContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst JobContext = /*#__PURE__*/createContext(undefined);\nexport const JobProvider = ({\n  children\n}) => {\n  _s();\n  const [selectedJob, setSelectedJobState] = useState(null);\n  const {\n    language\n  } = useLanguage();\n\n  // 根据当前语言选择职业数据\n  const currentJobsData = language === 'en' ? jobsDataEn : jobsData;\n\n  // 从URL获取职业ID\n  const getJobIdFromUrl = () => {\n    const urlParams = new URLSearchParams(window.location.search);\n    return urlParams.get('job');\n  };\n\n  // 设置URL中的职业ID\n  const setJobIdInUrl = jobId => {\n    const url = new URL(window.location.href);\n    url.searchParams.set('job', jobId);\n    window.history.pushState({}, '', url);\n  };\n\n  // 当语言改变时更新选中的职业\n  useEffect(() => {\n    if (selectedJob) {\n      const jobId = selectedJob.id;\n      const newJob = currentJobsData.find(job => job.id === jobId);\n      if (newJob) {\n        console.log('Updating job for language change:', language);\n        setSelectedJobState(newJob);\n      }\n    }\n  }, [language, currentJobsData, selectedJob]);\n\n  // 设置选中的职业\n  const setSelectedJob = job => {\n    console.log('Setting selected job:', job.title, 'Language:', language);\n    setSelectedJobState(job);\n    localStorage.setItem('selectedJobId', job.id);\n    setJobIdInUrl(job.id);\n  };\n\n  // 在组件加载时从URL或本地存储加载选择的职业ID，或使用默认职业\n  useEffect(() => {\n    // 首先尝试从URL获取职业ID\n    const urlJobId = getJobIdFromUrl();\n    // 然后尝试从localStorage获取职业ID\n    const savedJobId = localStorage.getItem('selectedJobId');\n    let jobToUse = null;\n    if (urlJobId) {\n      var _jobToUse;\n      // 如果URL中有职业ID，则使用它\n      jobToUse = currentJobsData.find(job => job.id === urlJobId) || null;\n      console.log('Using job from URL:', urlJobId, (_jobToUse = jobToUse) === null || _jobToUse === void 0 ? void 0 : _jobToUse.title);\n    } else if (savedJobId) {\n      var _jobToUse2;\n      // 如果localStorage中有职业ID，则使用它并更新URL\n      jobToUse = currentJobsData.find(job => job.id === savedJobId) || null;\n      console.log('Using job from localStorage:', savedJobId, (_jobToUse2 = jobToUse) === null || _jobToUse2 === void 0 ? void 0 : _jobToUse2.title);\n      if (jobToUse) {\n        setJobIdInUrl(jobToUse.id);\n      }\n    }\n\n    // 如果没有找到职业，则使用默认职业\n    if (!jobToUse) {\n      jobToUse = currentJobsData.find(job => job.id === \"programmer\") || currentJobsData[0];\n      console.log('Using default job:', jobToUse.title);\n      setJobIdInUrl(jobToUse.id);\n    }\n    setSelectedJobState(jobToUse);\n  }, [language, currentJobsData]);\n  return /*#__PURE__*/_jsxDEV(JobContext.Provider, {\n    value: {\n      selectedJob,\n      setSelectedJob,\n      availableJobs: currentJobsData\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(JobProvider, \"s6+y0cjOOj0hEmLP/fmQk4K40U0=\", false, function () {\n  return [useLanguage];\n});\n_c = JobProvider;\nexport const useJob = () => {\n  _s2();\n  const context = useContext(JobContext);\n  if (context === undefined) {\n    throw new Error('useJob must be used within a JobProvider');\n  }\n  return context;\n};\n_s2(useJob, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"JobProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","jobsData","jobsDataEn","useLanguage","jsxDEV","_jsxDEV","JobContext","undefined","JobProvider","children","_s","selectedJob","setSelectedJobState","language","currentJobsData","getJobIdFromUrl","urlParams","URLSearchParams","window","location","search","get","setJobIdInUrl","jobId","url","URL","href","searchParams","set","history","pushState","id","newJob","find","job","console","log","setSelectedJob","title","localStorage","setItem","urlJobId","savedJobId","getItem","jobToUse","_jobToUse","_jobToUse2","Provider","value","availableJobs","fileName","_jsxFileName","lineNumber","columnNumber","_c","useJob","_s2","context","Error","$RefreshReg$"],"sources":["/Users/linjia/code/change-profession-fronted/src/contexts/JobContext.tsx"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { Job } from '../types/types';\nimport { jobsData } from '../data/jobsData';\nimport { jobsDataEn } from '../data/jobsDataEn';\nimport { useLanguage } from './LanguageContext';\n\ninterface JobContextType {\n  selectedJob: Job | null;\n  setSelectedJob: (job: Job) => void;\n  availableJobs: Job[];\n}\n\nconst JobContext = createContext<JobContextType | undefined>(undefined);\n\nexport const JobProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [selectedJob, setSelectedJobState] = useState<Job | null>(null);\n  const { language } = useLanguage();\n  \n  // 根据当前语言选择职业数据\n  const currentJobsData = language === 'en' ? jobsDataEn : jobsData;\n  \n  // 从URL获取职业ID\n  const getJobIdFromUrl = () => {\n    const urlParams = new URLSearchParams(window.location.search);\n    return urlParams.get('job');\n  };\n  \n  // 设置URL中的职业ID\n  const setJobIdInUrl = (jobId: string) => {\n    const url = new URL(window.location.href);\n    url.searchParams.set('job', jobId);\n    window.history.pushState({}, '', url);\n  };\n  \n  // 当语言改变时更新选中的职业\n  useEffect(() => {\n    if (selectedJob) {\n      const jobId = selectedJob.id;\n      const newJob = currentJobsData.find(job => job.id === jobId);\n      if (newJob) {\n        console.log('Updating job for language change:', language);\n        setSelectedJobState(newJob);\n      }\n    }\n  }, [language, currentJobsData, selectedJob]);\n  \n  // 设置选中的职业\n  const setSelectedJob = (job: Job) => {\n    console.log('Setting selected job:', job.title, 'Language:', language);\n    setSelectedJobState(job);\n    localStorage.setItem('selectedJobId', job.id);\n    setJobIdInUrl(job.id);\n  };\n  \n  // 在组件加载时从URL或本地存储加载选择的职业ID，或使用默认职业\n  useEffect(() => {\n    // 首先尝试从URL获取职业ID\n    const urlJobId = getJobIdFromUrl();\n    // 然后尝试从localStorage获取职业ID\n    const savedJobId = localStorage.getItem('selectedJobId');\n    \n    let jobToUse: Job | null = null;\n    \n    if (urlJobId) {\n      // 如果URL中有职业ID，则使用它\n      jobToUse = currentJobsData.find(job => job.id === urlJobId) || null;\n      console.log('Using job from URL:', urlJobId, jobToUse?.title);\n    } else if (savedJobId) {\n      // 如果localStorage中有职业ID，则使用它并更新URL\n      jobToUse = currentJobsData.find(job => job.id === savedJobId) || null;\n      console.log('Using job from localStorage:', savedJobId, jobToUse?.title);\n      if (jobToUse) {\n        setJobIdInUrl(jobToUse.id);\n      }\n    }\n    \n    // 如果没有找到职业，则使用默认职业\n    if (!jobToUse) {\n      jobToUse = currentJobsData.find(job => job.id === \"programmer\") || currentJobsData[0];\n      console.log('Using default job:', jobToUse.title);\n      setJobIdInUrl(jobToUse.id);\n    }\n    \n    setSelectedJobState(jobToUse);\n  }, [language, currentJobsData]);\n  \n  return (\n    <JobContext.Provider value={{ selectedJob, setSelectedJob, availableJobs: currentJobsData }}>\n      {children}\n    </JobContext.Provider>\n  );\n};\n\nexport const useJob = () => {\n  const context = useContext(JobContext);\n  if (context === undefined) {\n    throw new Error('useJob must be used within a JobProvider');\n  }\n  return context;\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}